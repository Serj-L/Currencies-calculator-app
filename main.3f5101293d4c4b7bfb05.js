(()=>{"use strict";var e,t,n,r=document.getElementById("base-currency-abbreviation"),a=document.getElementById("template"),i=a?a.content.querySelector("[data-currency-list-item]"):null,c=i?i.querySelector("[data-amount-label]"):null,o=i?i.querySelector("[data-amount-input]"):null,s=i?i.querySelector("[data-currency-rate-value]"):null,u=i?i.querySelector("[data-delete-currency-btn]"):null,l=function(e){var t=e.currenciesListElement,n=e.currenciesList,a=e.baseCurrencies,l=e.baseCurrencyAbbreviation,d=e.currencyAmount,b=e.currenciesData,v=e.isClearListBeforeRender,m=void 0===v||v,f=e.startingOrderPosition,y=void 0===f?0:f;if(i&&t&&b){var p=[];n.forEach((function(e){var t=b.find((function(t){return t.Cur_Abbreviation===e}));t&&p.push(t)}));var h=b.find((function(e){return e.Cur_Abbreviation===l}));h&&(r&&(r.textContent="".concat(l)),m&&(t.textContent=""),p.forEach((function(e,n){if(c&&o&&s&&u){c.textContent="".concat(e.Cur_Name_Eng," (").concat(e.Cur_Abbreviation,")"),c.setAttribute("data-currency-abbreviation","".concat(e.Cur_Abbreviation)),o.value=(h.ratePerOneUnit/e.ratePerOneUnit*d).toFixed(2),o.setAttribute("data-currency-abbreviation","".concat(e.Cur_Abbreviation)),s.textContent="1 ".concat(e.Cur_Abbreviation," = ").concat((e.ratePerOneUnit/h.ratePerOneUnit).toFixed(4)," ").concat(l),s.setAttribute("data-currency-abbreviation","".concat(e.Cur_Abbreviation)),u.disabled=a.has(e.Cur_Abbreviation),u.setAttribute("data-currency-abbreviation","".concat(e.Cur_Abbreviation));var r=i.cloneNode(!0);r.setAttribute("data-currency-abbreviation","".concat(e.Cur_Abbreviation)),r.setAttribute("data-order-number","".concat(y+n)),e.Cur_Abbreviation===l&&r.setAttribute("data-is-base-currency","true"),t.appendChild(r)}})))}},d=function(e){var t=e.currenciesListElement,n=e.baseCurrencyAbbreviation;t&&t.childNodes.length&&t.childNodes.forEach((function(e){var t=e;t.getAttribute("data-currency-abbreviation")===n?t.setAttribute("data-is-base-currency","true"):t.setAttribute("data-is-base-currency","false")}))},b=function(e){var t=e.addCurrenciesListElement,n=e.currenciesData,r=e.userCurrenciesList;if(t){var a=n.filter((function(e){return!r.includes(e.Cur_Abbreviation)}));t.innerText="",a.forEach((function(e){t.insertAdjacentHTML("beforeend",'<div class="add-currencies__checkbox-wrapper">\n        <input\n          class="add-currencies__input"\n          type="checkbox"\n          id='.concat(e.Cur_ID,"-").concat(e.Cur_Abbreviation,"\n          name=").concat(e.Cur_Abbreviation,'\n          data-add-currencies-checkbox\n        >\n        <label\n          class="add-currencies__label"\n          for=').concat(e.Cur_ID,"-").concat(e.Cur_Abbreviation,"\n          data-add-currencies-label\n          data-currency-abbreviation=").concat(e.Cur_Abbreviation,"\n        >\n          ").concat(e.Cur_Name_Eng," (").concat(e.Cur_Abbreviation,")\n        </label>\n      </div>"))}))}},v=function(e){var t=e.baseCurrencySelectElement,n=e.baseCurrencyAbbreviation,r=e.userCurrenciesList;t&&(t.innerText="",r.forEach((function(e){t.insertAdjacentHTML("beforeend","<option\n        value=".concat(e," ").concat(e===n?"selected disabled":"","\n        data-currency-select-option>").concat(e,"\n      </option>"))})))},m=function(e){var t=e.baseCurrencySelectElement,n=e.baseCurrencyAbbreviation;t&&(t.childNodes.forEach((function(e){var t=e;t.value===n?(t.setAttribute("selected",""),t.setAttribute("disabled","")):(t.removeAttribute("selected"),t.removeAttribute("disabled"))})),t.value=n)};!function(e){e.MAIN="CurrenciesCalculatorApp"}(e||(e={})),function(e){e.LIGHT="light",e.DARK="dark"}(t||(t={})),function(e){e.NAME="data-theme-type"}(n||(n={}));var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f.apply(this,arguments)},y=function(e){var t=localStorage.getItem(e);return JSON.parse(t)},p=function(t,n,r){var a,i=y(e.MAIN),c=f(f({},i),((a={})[n]=r,a));localStorage.setItem(t,JSON.stringify(c))},h=function(e){var t="".concat(e.getFullYear()),n=e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1),r=e.getDate()<10?"0".concat(e.getDate()):"".concat(e.getDate());return"".concat(t,"-").concat(n,"-").concat(r)};function C(e,t){var n;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){e.apply(void 0,r)}),t)}}function g(e,t){if(t){if("lock"===e)return void(document.body.style.overflow="hidden");document.body.style.overflow="auto"}else{if(!(document.body.scrollHeight>window.innerHeight))return;if("lock"===e){var n=function(){var e=document.createElement("div");e.style.position="adsolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",e.style.visibility="hidden",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();return document.body.style.overflow="hidden",void document.body.style.setProperty("--scrollBarWidth","".concat(n,"px"))}document.body.style.overflow="auto",document.body.style.setProperty("--scrollBarWidth","0px")}}var A,_,E,L,w=function(t){var n,r,a,i,c,o,s=t.evt,u=t.currenciesListElement,l=t.userCurrenciesList,d=t.baseCurrencyAbbreviation,b=t.baseCurrencySelectElement;if(/touch/.test(s.type)){if(!(r=(n=s).targetTouches[0].target).hasAttribute("data-drag-n-drop-anchor"))return;a=n.changedTouches[0].clientX,i=n.changedTouches[0].clientY,c=n.changedTouches[0].pageX,o=n.changedTouches[0].pageY,g("lock",!0)}else{if(!(r=(n=s).target).hasAttribute("data-drag-n-drop-anchor"))return;a=n.clientX,i=n.clientY,c=n.pageX,o=n.pageY,g("lock",!1)}var m,f,y,h,C=r.closest("li"),A=C.getBoundingClientRect(),_=A.width,E=A.x,L=A.y,w=a-E,N=i-L,I=C.cloneNode(!0),k=I.querySelector("[data-drag-n-drop-anchor]"),B=Array.from(document.querySelectorAll("[data-currency-list-item]")),x=(m=function(e){var t,n;/touch/.test(e.type)?(c=(n=e).changedTouches[0].pageX,o=n.changedTouches[0].pageY):(c=(n=e).pageX,o=n.pageY),I.style.setProperty("--top","".concat(o-N,"px")),I.style.setProperty("--left","".concat(c-w,"px"));var r=I.getBoundingClientRect(),a=r.x,i=r.y,s=r.width,d=r.height;I.hidden=!0;var b=null===(t=document.elementFromPoint(a+s/2,i+d/2))||void 0===t?void 0:t.closest("li");if(I.hidden=!1,b){var v=Number(I.getAttribute("data-order-number")),m=Number(b.getAttribute("data-order-number"));if(m===v)return;B.splice(m,0,B.splice(v,1)[0]),l.splice(m,0,l.splice(v,1)[0]),I.setAttribute("data-order-number","".concat(m)),u&&(u.textContent="",B.forEach((function(e,t){e.setAttribute("data-order-number","".concat(t)),u.appendChild(e)})))}},70,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,r=e;f?(clearTimeout(y),y=setTimeout((function(){Date.now()-h>=70&&(m.apply(n,r),h=Date.now())}),Math.max(70-(Date.now()-h),0))):(m.apply(n,r),h=Date.now(),f=!0)}),O=function(t){C.removeAttribute("data-dragging"),document.body.removeChild(I),v({baseCurrencySelectElement:b,baseCurrencyAbbreviation:d,userCurrenciesList:l}),p(e.MAIN,"currenciesList",l),/touch/.test(t.type)?(document.body.removeEventListener("touchmove",x),g("unlock",!0)):(document.body.removeEventListener("mousemove",x),g("unlock",!1))};C.setAttribute("data-dragging",""),document.body.appendChild(I),I.style.setProperty("--max-width","".concat(_,"px")),I.style.setProperty("--top","".concat(o-N,"px")),I.style.setProperty("--left","".concat(c-w,"px")),I.setAttribute("data-dragging-clone",""),k.style.cursor="grabbing",/touch/.test(s.type)?(document.body.addEventListener("touchmove",x),C.addEventListener("touchend",O,{once:!0})):(document.body.addEventListener("mousemove",x),I.addEventListener("mouseup",O))},N=function(){return y(e.MAIN).themeType},I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},I.apply(this,arguments)},k=function(){function e(){this._defaultOptions={type:"info",position:"top-right",animationType:"bounce",autoClose:5e3,closeOnClick:!0,onClose:function(){},showProgressBar:!0,pauseOnHover:!0},this._snackBarElementIcons={info:'<svg viewBox="0 0 24 24" width="100%" height="100%" fill="currentColor"><path d="M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"></path></svg>',success:'<svg viewBox="0 0 24 24" width="100%" height="100%" fill="currentColor"><path d="M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"></path></svg>',warning:'<svg viewBox="0 0 24 24" width="100%" height="100%" fill="currentColor"><path d="M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"></path></svg>',error:'<svg viewBox="0 0 24 24" width="100%" height="100%" fill="currentColor"><path d="M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"></path></svg>'},this._snackBarsOptions=new Map,this._snackBarsTimeoutsId=new Map,this._snackBarsIntervalsId=new Map}return e.prototype.create=function(e,t){var n,r=this,a=document.createElement("div"),i=String(Date.now());t?(n=I(I({},this._defaultOptions),t)).closeOnClick||n.autoClose||(n.autoClose=this._defaultOptions.autoClose):n=this._defaultOptions,this._snackBarsOptions.set(i,n),a.classList.add("snack-bar__element"),a.dataset.id=i,a.dataset.type=n.type,a.dataset.position=n.position,a.dataset.animation=n.animationType,a.dataset.closeOnClick="".concat(n.closeOnClick),a.insertAdjacentHTML("beforeend","<div class='snack-bar__icon'>\n        ".concat(this._snackBarElementIcons[n.type],"\n      </div>\n      <p class='snack-bar__message'>\n        ").concat(e,"\n      </p>\n      ").concat(n.closeOnClick?"<span class='snack-bar__close-icon'>&times;</span>":"")),a.addEventListener("animationiteration",(function(){return a.style.animationPlayState="paused"}));var c=document.querySelector(".snack-bar[data-position='".concat(n.position,"']"))||this._createContainer(n.position);n.position.includes("bottom")?c.prepend(a):c.append(a),requestAnimationFrame((function(){a.dataset.isActive=""})),n.closeOnClick&&a.addEventListener("click",(function(){r._delete(a,n.onClose)}),{once:!0}),n.autoClose&&this._autoClose(a,n.autoClose,n.onClose),n.showProgressBar&&n.autoClose&&(this._progressCalculation(a,n.autoClose),n.pauseOnHover&&(a.addEventListener("mouseover",(function(e){var t=e.target.dataset.id;clearInterval(r._snackBarsIntervalsId.get(t)),clearInterval(r._snackBarsTimeoutsId.get(t)),r._snackBarsIntervalsId.delete(t),r._snackBarsTimeoutsId.delete(t)})),a.addEventListener("mouseleave",(function(e){var t=e.target,n=t.dataset.id,a=r._snackBarsOptions.get(n),i=t.dataset.displayedTime?Number(t.dataset.displayedTime):0,c=a.autoClose-i;r._progressCalculation(t,a.autoClose),r._autoClose(t,c,a.onClose)}))))},e.prototype._autoClose=function(e,t,n){var r=this,a=e.dataset.id,i=setTimeout((function(){r._delete(e,n)}),t);this._snackBarsTimeoutsId.set(a,Number(i))},e.prototype._progressCalculation=function(e,t){e.dataset.showProgressBar||(e.dataset.showProgressBar="true",e.style.setProperty("--progress","1"));var n=e.dataset.id,r=Date.now(),a=e.dataset.displayedTime?Number(e.dataset.displayedTime):0,i=setInterval((function(){var n=Date.now();e.style.setProperty("--progress","".concat(1-(a+(n-r))/t)),e.dataset.displayedTime="".concat(a+(n-r))}),10);setTimeout((function(){clearInterval(i)}),t-a),this._snackBarsIntervalsId.set(n,Number(i))},e.prototype._delete=function(e,t){var n=this,r=e.parentElement,a=e.dataset.id;e.style.animationPlayState="running",e.addEventListener("animationend",(function(){if(e.remove(),n._snackBarsOptions.delete(a),n._snackBarsTimeoutsId.delete(a),n._snackBarsIntervalsId.delete(a),r){if(r.hasChildNodes())return;r.remove()}})),t()},e.prototype._createContainer=function(e){var t=document.createElement("div");return t.classList.add("snack-bar"),t.dataset.position=e,document.body.appendChild(t),t},e}(),B=document.getElementById("spinner"),x=function(e){B&&(e?B.classList.add("spinner--active"):B.classList.remove("spinner--active"))},O=document.getElementById("scroll-top"),T=document.getElementById("scroll-top-button"),M=function(){return M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},M.apply(this,arguments)},D=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},S="https://www.nbrb.by/api/exrates/",U="".concat(S,"/rates?periodicity=0"),q="".concat(S,"/currencies/"),j=[],R=new k,H=function(e){return D(void 0,void 0,Promise,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(U,"&ondate=").concat(h(e)))];case 1:return(t=n.sent()).ok?[4,t.json()]:[3,3];case 2:return[2,n.sent()];case 3:throw new Error("Network error:"+t.status)}}))}))},Y=function(e){return D(void 0,void 0,Promise,(function(){var t,n,r;return P(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,5,6]),x(!0),[4,H(e)];case 1:return t=a.sent(),n=[],j.length?[3,3]:[4,D(void 0,void 0,Promise,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return[4,fetch(q)];case 1:return(e=t.sent()).ok?[4,e.json()]:[3,3];case 2:return[2,t.sent()];case 3:throw new Error("Network error:"+e.status)}}))}))];case 2:j=a.sent(),a.label=3;case 3:return n=t.map((function(e){var t=j.find((function(t){return t.Cur_ID===e.Cur_ID})),n=t.Cur_Name_Eng,r=t.Cur_QuotName_Eng,a=t.Cur_Name_EngMulti,i=e.Cur_OfficialRate/e.Cur_Scale;return M(M({},e),{Cur_Abbreviation:e.Cur_Abbreviation.toUpperCase(),Cur_Name_Eng:n,Cur_QuotName_Eng:r,Cur_Name_EngMulti:a,ratePerOneUnit:i})})),n.push({Cur_ID:933,Date:n[0].Date,Cur_Abbreviation:"BYN",Cur_Scale:1,Cur_Name:"Белорусский рубль",Cur_OfficialRate:1,Cur_Name_Eng:"Belarusian Ruble",Cur_QuotName_Eng:"1 Belarusian Ruble",Cur_Name_EngMulti:"Belarusian Rubles",ratePerOneUnit:1}),[2,n];case 4:return r=a.sent(),R.create("".concat(r.message),{type:"error",position:"top-center",autoClose:1e4}),[3,6];case 5:return x(!1),[7];case 6:return[2]}}))}))},z=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},F=document.body,X=document.getElementById("theme-switcher"),G=document.getElementById("date-picker"),W=document.getElementById("currency-select"),J=document.getElementById("currencies-list"),K=document.getElementById("add-currencies-btn"),Q=document.getElementById("add-currencies-form"),V=document.getElementById("available-currencies-list"),Z=document.getElementById("add-currencies-reset-btn"),$=document.getElementById("calculator-additional-info"),ee=new Date,te=new Date(2020,0,1),ne=window.matchMedia&&window.window.matchMedia("(prefers-color-scheme: dark)").matches?t.DARK:t.LIGHT,re="BYN",ae=new Set(["BYN","USD","EUR","RUB","CNY"]),ie=[],ce=new k;E=e.MAIN,L={themeType:ne,baseCurrencyAbbreviation:re,currencyAmount:10,currenciesList:Array.from(ae)},localStorage.getItem(E)||localStorage.setItem(E,JSON.stringify(L)),re=y(e.MAIN).baseCurrencyAbbreviation,A=y(e.MAIN).currencyAmount,_=y(e.MAIN).currenciesList,function(e){if(e){var t=N();e.getAttribute(n.NAME)!==t&&document.body.setAttribute(n.NAME,t)}}(F),function(e){var t=e.datePickerElement,n=e.date,r=e.minDate,a=e.maxDate;t&&(t.setAttribute("value",h(n)),r&&t.setAttribute("min",h(r)),a&&t.setAttribute("max",h(a)))}({datePickerElement:G,date:ee,minDate:te,maxDate:ee}),O&&T&&(window.addEventListener("scroll",(function(){document.documentElement.scrollTop>300?O.classList.contains("scroll-top--active")||O.classList.add("scroll-top--active"):O.classList.contains("scroll-top--active")&&O.classList.remove("scroll-top--active")})),T.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))),Y(ee).then((function(e){var t,n,r,a,i,c;l({currenciesListElement:J,currenciesList:_,baseCurrencies:ae,baseCurrencyAbbreviation:re,currenciesData:e,currencyAmount:A}),(null==e?void 0:e.length)?(ie.push.apply(ie,e),b({addCurrenciesListElement:V,currenciesData:ie,userCurrenciesList:_}),v({baseCurrencySelectElement:W,baseCurrencyAbbreviation:re,userCurrenciesList:_}),null==$||$.classList.add("calculator__additional-info--active")):(n=(t={message:"Ups, something went wrong &#128533",containerElement:document.getElementById("currencies-list"),tagName:"li",tagClassName:"calculator__currencies-list-warning",textTagClassName:"calculator__currencies-list-warning-text"}).message,a=t.tagName,i=t.tagClassName,c=t.textTagClassName,(r=t.containerElement)&&r.insertAdjacentHTML("afterbegin","<".concat(a.toLocaleLowerCase()," class=").concat(i,">\n      <span class=").concat(c,">").concat(n,"</span>\n    </").concat(a.toLocaleLowerCase(),">")))})),null==X||X.addEventListener("click",(function(){return r=N(),a=F,i=r===t.LIGHT?t.DARK:t.LIGHT,a.setAttribute(n.NAME,i),void p(e.MAIN,"themeType",i);var r,a,i}));var oe=C((function(e){if(e){var t=e.target,n=t.valueAsDate;if(n){var r=new Date(t.min),a=new Date(t.max);r&&n<r&&(t.value=h(r),n=r,ce.create("Entered date can't be earlier than ".concat(t.min),{type:"warning",position:"top-center",autoClose:1e4})),a&&n>a&&(t.value=h(a),n=a,ce.create("Entered date can't be later than ".concat(t.max),{type:"warning",position:"top-center",autoClose:1e4})),Y(n).then((function(e){l({currenciesListElement:J,currenciesList:_,baseCurrencies:ae,baseCurrencyAbbreviation:re,currenciesData:e,currencyAmount:A}),(null==e?void 0:e.length)?(ie.length=0,ie.push.apply(ie,e),b({addCurrenciesListElement:V,currenciesData:ie,userCurrenciesList:_})):t.value=h(ee)}))}}}),600);null==G||G.addEventListener("input",(function(e){return oe(e)})),null==W||W.addEventListener("change",(function(t){var n=t.target;if(n){var r=n.value,a=ie.find((function(e){return e.Cur_Abbreviation===r})),i=document.querySelectorAll("[data-currency-rate-value]"),c=document.querySelectorAll("[data-amount-input]");i.forEach((function(e){var t=e.getAttribute("data-currency-abbreviation"),n=ie.find((function(e){return e.Cur_Abbreviation===t}));e.textContent="1 ".concat(n.Cur_Abbreviation," = ").concat((n.ratePerOneUnit/a.ratePerOneUnit).toFixed(4)," ").concat(r)})),d({currenciesListElement:J,baseCurrencyAbbreviation:re=r}),m({baseCurrencySelectElement:W,baseCurrencyAbbreviation:re}),p(e.MAIN,"baseCurrencyAbbreviation",re),c.forEach((function(t){var n=t;n.getAttribute("data-currency-abbreviation")===re&&(A=n.valueAsNumber,p(e.MAIN,"currencyAmount",A))})),n.blur()}}));var se=C((function(t){if(t){var n,r=t.target,a=r.valueAsNumber,i=r.getAttribute("data-currency-abbreviation");if(i!==re){var c=document.querySelectorAll("[data-currency-rate-value]");n=ie.find((function(e){return e.Cur_Abbreviation===i})),c.forEach((function(e){var t=e.getAttribute("data-currency-abbreviation"),r=ie.find((function(e){return e.Cur_Abbreviation===t}));e.textContent="1 ".concat(r.Cur_Abbreviation," = ").concat((r.ratePerOneUnit/n.ratePerOneUnit).toFixed(4)," ").concat(i)})),d({currenciesListElement:J,baseCurrencyAbbreviation:re=i}),m({baseCurrencySelectElement:W,baseCurrencyAbbreviation:re}),p(e.MAIN,"baseCurrencyAbbreviation",re)}else n=ie.find((function(e){return e.Cur_Abbreviation===re}));isNaN(a)||(document.querySelectorAll("[data-amount-input]").forEach((function(e){if(e.getAttribute("data-currency-abbreviation")!==re){var t=e.getAttribute("data-currency-abbreviation"),r=e,i=ie.find((function(e){return e.Cur_Abbreviation===t}));r.value=a<0?"0.00":(n.ratePerOneUnit/i.ratePerOneUnit*a).toFixed(2)}})),A=a<0?0:a,p(e.MAIN,"currencyAmount",A),setTimeout((function(){r.value=A.toFixed(2)}),3e3))}}),400);null==J||J.addEventListener("input",(function(e){return se(e)})),null==K||K.addEventListener("click",(function(){K.classList.toggle("add-currencies__btn--active"),null==V||V.scrollTo(0,0),null==Q||Q.classList.toggle("add-currencies__form--active"),null==Z||Z.click()}));var ue=function(){null==K||K.classList.remove("add-currencies__btn--active"),null==Q||Q.classList.remove("add-currencies__form--active")};document.body.addEventListener("keyup",(function(e){(null==Q?void 0:Q.classList.contains("add-currencies__form--active"))&&"Escape"===e.key&&(ue(),null==Z||Z.click())})),document.body.addEventListener("click",(function(e){var t;if(e){var n=e.target,r=null==Q?void 0:Q.classList.contains("add-currencies__form--active");if(n&&r){var a="add-currencies-btn"===(null===(t=n.closest("button"))||void 0===t?void 0:t.id),i="add-currencies-form"===n.id,c="add-currencies-submit-btn"===n.id,o="add-currencies-reset-btn"===n.id,s=n.hasAttribute("data-add-currencies-label"),u="addCurrenciesCheckbox"in n.dataset;a||i||u||s||c||o||(ue(),null==Z||Z.click())}}})),null==Q||Q.addEventListener("submit",(function(t){if(t&&t.target){t.preventDefault(),ue();var n=t.target,r=Object.fromEntries(new FormData(n).entries()),a=Object.keys(r);a.length&&(_=z(z([],_,!0),a,!0),l({currenciesListElement:J,currenciesList:a,baseCurrencies:ae,baseCurrencyAbbreviation:re,currenciesData:ie,currencyAmount:A,isClearListBeforeRender:!1,startingOrderPosition:_.length-a.length}),b({addCurrenciesListElement:V,currenciesData:ie,userCurrenciesList:_}),v({baseCurrencySelectElement:W,baseCurrencyAbbreviation:re,userCurrenciesList:_}),p(e.MAIN,"currenciesList",_))}})),null==J||J.addEventListener("click",(function(t){if(t){var n=t.target;if("BUTTON"===n.tagName){var r=n.closest("[data-currency-list-item]"),a=n.getAttribute("data-currency-abbreviation");if(r&&a){if(_=_.filter((function(e){return e!==a})),b({addCurrenciesListElement:V,currenciesData:ie,userCurrenciesList:_}),p(e.MAIN,"currenciesList",_),J.removeChild(r),a===re){d({currenciesListElement:J,baseCurrencyAbbreviation:re="BYN"});var i=document.querySelectorAll("[data-currency-rate-value]"),c=ie.find((function(e){return e.Cur_Abbreviation===re}));i.forEach((function(e){var t=e.getAttribute("data-currency-abbreviation"),n=ie.find((function(e){return e.Cur_Abbreviation===t}));e.textContent="1 ".concat(n.Cur_Abbreviation," = ").concat((n.ratePerOneUnit/c.ratePerOneUnit).toFixed(4)," ").concat(re)})),p(e.MAIN,"baseCurrencyAbbreviation",re),A=10,p(e.MAIN,"currencyAmount",A)}v({baseCurrencySelectElement:W,baseCurrencyAbbreviation:re,userCurrenciesList:_}),document.querySelectorAll("[data-currency-list-item]").forEach((function(e,t){e.setAttribute("data-order-number","".concat(t))}))}}}})),null==J||J.addEventListener("mousedown",(function(e){return w({evt:e,currenciesListElement:J,userCurrenciesList:_,baseCurrencyAbbreviation:re,baseCurrencySelectElement:W})})),null==J||J.addEventListener("touchstart",(function(e){return w({evt:e,currenciesListElement:J,userCurrenciesList:_,baseCurrencyAbbreviation:re,baseCurrencySelectElement:W})}))})();
//# sourceMappingURL=main.3f5101293d4c4b7bfb05.js.map